if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("RealtimeEntityPresenceTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:RealtimeEntityPresenceLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:RealtimeEntityPresenceLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:RealtimeEntityPresenceLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAction=function(a){this.$1.action=a;return this};c.setActionReason=function(a){this.$1.action_reason=a;return this};c.setAppID=function(a){this.$1.app_id=a;return this};c.setCapabilities=function(a){this.$1.capabilities=a;return this};c.setClientSubscriptionID=function(a){this.$1.client_subscription_id=a;return this};c.setClientTimeMs=function(a){this.$1.client_time_ms=a;return this};c.setEntityHandler=function(a){this.$1.entity_handler=a;return this};c.setEntityID=function(a){this.$1.entity_id=a;return this};c.setEntityType=function(a){this.$1.entity_type=a;return this};c.setEventSource=function(a){this.$1.event_source=a;return this};c.setExceptionMessage=function(a){this.$1.exception_message=a;return this};c.setExceptionType=function(a){this.$1.exception_type=a;return this};c.setGatewayConnected=function(a){this.$1.gateway_connected=a;return this};c.setSequenceID=function(a){this.$1.sequence_id=a;return this};c.setSessionID=function(a){this.$1.session_id=a;return this};c.setSourceHost=function(a){this.$1.source_host=a;return this};c.setSourceTwTaskHandle=function(a){this.$1.source_tw_task_handle=a;return this};c.setTopic=function(a){this.$1.topic=a;return this};c.setUserAgentString=function(a){this.$1.user_agent_string=a;return this};c.setUserFbid=function(a){this.$1.user_fbid=a;return this};return a}();c={action:!0,action_reason:!0,app_id:!0,capabilities:!0,client_subscription_id:!0,client_time_ms:!0,entity_handler:!0,entity_id:!0,entity_type:!0,event_source:!0,exception_message:!0,exception_type:!0,gateway_connected:!0,sequence_id:!0,session_id:!0,source_host:!0,source_tw_task_handle:!0,topic:!0,user_agent_string:!0,user_fbid:!0};f["default"]=a}),66);
__d("VideoVODCVCFetchingQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4798311216901927"}),null);
__d("VideoVODCVCFetchingQuery.graphql",["VideoVODCVCFetchingQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"prev_cvc"},c={defaultValue:null,kind:"LocalArgument",name:"stage"},d={defaultValue:null,kind:"LocalArgument",name:"video_asset_id"},e={defaultValue:null,kind:"LocalArgument",name:"video_id"},f=[{alias:null,args:[{kind:"Variable",name:"prev_cvc",variableName:"prev_cvc"},{kind:"Variable",name:"stage",variableName:"stage"},{kind:"Variable",name:"video_asset_id",variableName:"video_asset_id"},{kind:"Variable",name:"video_id",variableName:"video_id"}],concreteType:"VODPresenceCVCResponse",kind:"LinkedField",name:"vod_presence_cvc",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"cvc",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"next_poll_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_displayed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_asset_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[a,c,d,e],kind:"Fragment",metadata:null,name:"VideoVODCVCFetchingQuery",selections:f,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,c,d,a],kind:"Operation",name:"VideoVODCVCFetchingQuery",selections:f},params:{id:b("VideoVODCVCFetchingQuery_facebookRelayOperation"),metadata:{},name:"VideoVODCVCFetchingQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("InstreamVideoAdBreak",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a.instreamPlacement,this.$2=a.index,this.$3=a.timeOffsetInMs,this.$4=a.adBreakDurationInMs,this.$5=a.isAdBreakAutoInserted,this.$6=a.naturalnessScore,this.$7=a.midSpeechScore}var b=a.prototype;b.getInstreamPlacement=function(){return this.$1};b.getIndex=function(){return this.$2};b.getTimeOffsetInMs=function(){return this.$3};b.getAdBreakDurationInMs=function(){return this.$4};b.getIsAdBreakAutoInserted=function(){return this.$5};b.getNaturalnessScore=function(){return this.$6};b.getMidSpeechScore=function(){return this.$7};return a}();f["default"]=a}),66);
__d("FBCircularGlyph.react",["cx","Image.react","joinClasses","prop-types","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){var a=this.props,b=a.circleSize,d=a.glyph,e=a.glyphSize;a=babelHelpers.objectWithoutPropertiesLoose(a,["circleSize","glyph","glyphSize"]);return i.jsx("div",babelHelpers["extends"]({},a,{className:c("joinClasses")("_32qy",a.className),style:babelHelpers["extends"]({width:b,height:b},a.style),children:i.jsx("div",{className:"_32qz",children:i.jsx("div",{className:"_32q-",children:i.jsx(c("Image.react"),{src:d,width:e,height:e})})})}))};return b}(i.Component);a.propTypes={circleSize:c("prop-types").number,glyph:c("prop-types").oneOfType([c("prop-types").object,c("prop-types").string])};g["default"]=a}),98);
__d("EntityPresenceLogger",["BladeRunnerStreamStatus","CurrentUser","EntityPresenceConfig","Random","RealtimeEntityPresenceTypedLogger","UserAgentData","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h="client";a=function(){function a(a,b,c,d){this.entityType=a,this.entityID=b,this.subscriptionID=c,this.shouldLog=this.$1(),this.sequenceID=0,this.appID=d}var b=a.prototype;b.logEnter=function(a){this.shouldLog&&this.$2().setAction("enter").setSequenceID(++this.sequenceID).setCapabilities(a).log()};b.logReconnect=function(a){this.shouldLog&&this.$2().setAction("enter").setActionReason("reconnect").setSequenceID(++this.sequenceID).setCapabilities(a).log()};b.logSubscribeCallback=function(a){this.shouldLog&&this.$2().setAction("subscribe_completed").setActionReason(a?"succeeded":"failed").log()};b.logPing=function(){this.shouldLog&&this.$2().setAction("ping").setSequenceID(++this.sequenceID).log()};b.logSkippedPing=function(){this.shouldLog&&this.$2().setAction("skipped_ping").setSequenceID(this.sequenceID).log()};b.logChangeCapabilities=function(a){this.shouldLog&&this.$2().setAction("change_capabilities").setSequenceID(++this.sequenceID).setCapabilities(a).log()};b.logLeave=function(){this.shouldLog&&this.$2().setAction("leave").setSequenceID(++this.sequenceID).log()};b.logFlowStatus=function(a){if(this.shouldLog){var b="unknown";switch(a){case d("BladeRunnerStreamStatus").StreamStatus.ACCEPTED:b="accepted";break;case d("BladeRunnerStreamStatus").StreamStatus.REJECTED:b="rejected";break;case d("BladeRunnerStreamStatus").StreamStatus.STARTED:b="started";break;case d("BladeRunnerStreamStatus").StreamStatus.STOPPED:b="stopped";break;case d("BladeRunnerStreamStatus").StreamStatus.CLOSED:b="closed";break}this.$2().setAction("flow_"+b).log()}};b.logUnsubscribeCallback=function(a){this.shouldLog&&this.$2().setAction("unsubscribe_completed").setActionReason(a?"succeeded":"failed").log()};b.getLogInfo=function(){return this.shouldLog?{client_subscription_id:this.subscriptionID,sequence_id:this.sequenceID.toString()}:null};b.getLogInfoMQTT=function(){return this.shouldLog?{clientSubscriptionId:this.subscriptionID,sequenceId:this.sequenceID}:null};b.$1=function(){if(c("gkx")("678741"))return!0;return c("gkx")("678742")?d("Random").random()<(Object.prototype.hasOwnProperty.call(c("EntityPresenceConfig").samplingRateOverride,this.entityType)?c("EntityPresenceConfig").samplingRateOverride[this.entityType]:c("EntityPresenceConfig").sessionLoggingSamplingRate):!1};b.$2=function(){return new(c("RealtimeEntityPresenceTypedLogger"))().setEntityType(this.entityType).setEntityID(this.entityID).setClientSubscriptionID(this.subscriptionID).setClientTimeMs(Date.now()).setEventSource(h).setAppID(this.appID).setUserFbid(c("CurrentUser").getID()).setUserAgentString(c("UserAgentData").browserName+"/"+(c("UserAgentData").browserFullVersion||""))};return a}();g["default"]=a}),98);
__d("EntityPresenceClient",["$InternalEnum","BladeRunnerClient","BladeRunnerStreamHandler","BladeRunnerStreamStatus","EntityPresenceLogger","ODS","UserActivity","clearInterval","setInterval","uuid"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("BladeRunnerClient"))(),i="219994525426954",j="realtime.entity_presence.js_client",k=b("$InternalEnum").Mirrored(["ON_TAB_ONLY","ALWAYS"]);function a(a,b,e,f){f===void 0&&(f=k.ON_TAB_ONLY);var g=c("uuid")(),l=new(c("EntityPresenceLogger"))(a,b,g,i);l.logEnter(e);d("ODS").bumpEntityKey(3291,j,a+".enter");var m=h.requestStream({method:"EntityPresence:"+a},JSON.stringify({entity_type:a,entity_id:b,capabilities:(g=e)!=null?g:null,log_info:l.getLogInfo()}),new(c("BladeRunnerStreamHandler"))(null,null,function(a){l.logFlowStatus(a)},null)),n=function(){switch(f){case k.ON_TAB_ONLY:return c("UserActivity").isOnTab();case k.ALWAYS:return!0}},o=c("setInterval")(function(){n()&&m.getStatus()==d("BladeRunnerStreamStatus").StreamStatus.STARTED?(l.logPing(),m.amendFireAndForget("")):l.logSkippedPing()},3e3);return{entityID:b,capabilities:e,changeCapabilities:function(b){l.logChangeCapabilities(b);d("ODS").bumpEntityKey(3291,j,a+".change_capabilities");return m.amendWithAck(JSON.stringify({capabilities:b}))},leave:function(){l.logLeave(),d("ODS").bumpEntityKey(3291,j,a+".leave"),m.cancel(),c("clearInterval")(o)}}}g.EntityPresenceActivityPolicy=k;g.enter=a}),98);
__d("DocumentFocusForAdsVideoAutoplayRule",["VideoAutoplayRule"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){return a.call(this,b)||this}var c=b.prototype;c.calculateAutoplayScore=function(){return this.isEnabled()?this.$DocumentFocusForAdsVideoAutoplayRule1():1};c.$DocumentFocusForAdsVideoAutoplayRule1=function(){var a=this.videoUnit.getVideoPlayerController();a=!!(a&&a.isAd());return a?document.hasFocus()?1:0:1};return b}(c("VideoAutoplayRule"));g["default"]=a}),98);
__d("FeedVideoClickToPlayController",["DocumentFocusForAdsVideoAutoplayRule","Event","VideoPlayerAbortLoadingExperiment","VideoPlayerExperiments","destroyOnUnload","setImmediate","throttle"],(function(a,b,c,d,e,f,g){var h=null;a=function(){function a(){var a=this;this.$4=new Set();this.$3=null;this.$2=null;this.$1=null;c("destroyOnUnload")(function(){a.$4.clear(),a.$2&&(a.$2.remove(),a.$2=null),a.$3&&(a.$3.disconnect(),a.$3=null),a.$1&&(a.$1.remove(),a.$1=null),a===h&&(h=null)})}var b=a.prototype;b.addVideoUnit=function(a){var b=this;if(c("VideoPlayerExperiments").useBringYourOwnAutoplayRule&&c("VideoPlayerExperiments").pauseAdIfNoDocumentFocus){var d=new(c("DocumentFocusForAdsVideoAutoplayRule"))(a);a.registerAutoplayRule(d)}this.$5()||this.$6();this.$7()||this.$8();a.addListener("beginPlayback",function(c){c=c.reason;(c==="user_initiated"||c==="loop_initiated")&&b.$4.add(a)});a.addListener("turnOffAutoplay",function(c){c=c.reason;c==="unmuted"&&b.$4.add(a)});a.getVideoPlayerController().isState("playing")&&!a.isAutoplayable()&&this.$4.add(a);a.addListener("pausePlayback",function(){b.$4["delete"](a)});a.addListener("finishPlayback",function(){b.$4["delete"](a)})};a.registerVideoUnit=function(b){h==null&&(h=new a()),h.addVideoUnit(b)};b.$6=function(){this.$2&&this.$2.remove(),this.$2=c("Event").listen(window,"scroll",c("throttle")(this.onWindowEvent.bind(this),200))};b.$8=function(){this.$1&&this.$1.remove(),this.$1=c("Event").listen(window,"resize",c("throttle")(this.onWindowEvent.bind(this),200))};b.$5=function(){return!!this.$2};b.$7=function(){return!!this.$1};b.$9=function(a){a.pause("autoplay_initiated"),!c("VideoPlayerExperiments").noAbortLoadingInFeedClickToPlay&&c("VideoPlayerAbortLoadingExperiment").canAbort&&a.abortLoading(),this.$4["delete"](a)};b.onWindowEvent=function(){var a=this;this.$4.forEach(function(b){if(b&&!b.isVisible()&&!b.getIsInChannel()){var d=b.getVideoPlayerController();d.isAd()||c("VideoPlayerExperiments").pauseWhenOffscreen?c("VideoPlayerExperiments").slidingWNSv3?c("setImmediate")(function(){b&&!b.isVisible()&&!b.getIsInChannel()&&a.$9(b)}):a.$9(b):d.isMuted()&&d.isState("playing")&&(a.$9(b),d.emit("resumeAutoplay"))}})};return a}();g["default"]=a}),98);
__d("VideoAutoplayPlayerBase",["EventEmitter","FBLogger"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.wasVisible=!1,c.$VideoAutoplayPlayerBase1=[],b)||babelHelpers.assertThisInitialized(c)}var d=b.prototype;d.isVisible=function(){throw new Error("Should be overridden")};d.getDistanceToViewport=function(){throw new Error("Should be overridden")};d.getVideoPlayerController=function(){c("FBLogger")("video").warn(["VideoAutoplayPlayerBase.getVideoPlayerController()","was called and returned null."].join(" "));return null};d.logDisplayed=function(){throw new Error("Should be overridden")};d.playWithoutUnmute=function(a){throw new Error("Should be overridden")};d.pause=function(a){throw new Error("Should be overridden")};d.isAutoplayable=function(){throw new Error("Should be overridden")};d.getDOMPosition=function(){throw new Error("Should be overridden")};d.isLooping=function(){throw new Error("Should be overridden")};d.isState=function(a){throw new Error("Should be overridden")};d.preload=function(){throw new Error("Should be overridden")};d.isMuted=function(){throw new Error("Should be overridden")};d.isPlaying=function(){throw new Error("Should be overridden")};d.shouldPauseWhenScrolledOffscreen=function(){throw new Error("Should be overridden")};d.getAutoplayRules=function(){return this.$VideoAutoplayPlayerBase1};d.registerAutoplayRule=function(a){this.$VideoAutoplayPlayerBase1.push(a)};d.shouldImmediatelyAutoplayOnRegister=function(){return!1};return b}(c("EventEmitter"));g["default"]=a}),98);
__d("FeedVideoPlayerController",["csx","DOM","DOMQuery","LitestandStoryInsertionStatus","Run","SubscriptionsHandler","VideoAutoplayPlayerBase","VideoPlayerApiEvents","VideoPlayerExperiments","VideoPlayerLoggerErrorStates","VideoPlayerLoggerErrors","getElementPosition","getViewportDimensions"],(function(a,b,c,d,e,f,g,h){"use strict";var i=42;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e){var f;f=a.call(this)||this;f.$FeedVideoPlayerController1=e;f.$FeedVideoPlayerController2=b;f.$FeedVideoPlayerController3=new Set();f.$FeedVideoPlayerController1.viewport_autoplay||f.$FeedVideoPlayerController3.add("server_blocked");f.$FeedVideoPlayerController12=c("VideoPlayerExperiments").autoplayUntilHalfGone?.5:1;f.$FeedVideoPlayerController4=f.isAutoplayable();f.$FeedVideoPlayerController6=e.controller;f.$FeedVideoPlayerController10=!!e.startsMuted;f.$FeedVideoPlayerController13=!1;f.$FeedVideoPlayerController7=f.isAutoplayable();(f.$FeedVideoPlayerController6.getIsInChannel()||f.$FeedVideoPlayerController6.isState("playing")&&!f.$FeedVideoPlayerController6.isMuted())&&(f.$FeedVideoPlayerController7=!1);f.$FeedVideoPlayerController6.registerOption("FeedAutoplay","isAutoplaying",function(){return f.$FeedVideoPlayerController7},function(a){f.$FeedVideoPlayerController7=a});f.$FeedVideoPlayerController6.registerOption("FeedAutoplay","isVisibleForAutoplay",function(){return f.isVisible()});f.$FeedVideoPlayerController6.registerOption("FeedAutoplay","shouldOpenSidePaneInChannelView",function(){return e.autoPlayWithChannelViewOrSnowlift});f.$FeedVideoPlayerController6.registerOption("FeedAutoplay","isFilteredByWarningScreen",function(){return f.$FeedVideoPlayerController13},function(a){f.$FeedVideoPlayerController13=a});f.$FeedVideoPlayerController6.setLogEntryPropertyGetters({autoplay_eligible:function(){return f.isAutoplayable()},autoplay_failure_reasons:function(){return JSON.stringify(Array.from(f.$FeedVideoPlayerController3))}});f.$FeedVideoPlayerController14();d("Run").onLeave(function(){f.$FeedVideoPlayerController5.release()});if(f.isState("fallback")){f.$FeedVideoPlayerController15();f.$FeedVideoPlayerController16();return babelHelpers.assertThisInitialized(f)}f.$FeedVideoPlayerController5.addSubscriptions(c("LitestandStoryInsertionStatus").registerBlocker(function(){return f.isState("playing")}));return f}var e=b.prototype;e.$FeedVideoPlayerController17=function(){return this.$FeedVideoPlayerController6.isState("destroyed")};e.getDistanceToViewport=function(){if(this.$FeedVideoPlayerController17())return-Infinity;if(this.$FeedVideoPlayerController6.isFullscreen())return 0;var a=c("getViewportDimensions")().height,b=this.getDOMPosition();if(b.height===0)return-Infinity;b=b.y+(1-this.$FeedVideoPlayerController12)*b.height;return b-a/2};e.isVisible=function(){if(this.$FeedVideoPlayerController17())return!1;if(this.$FeedVideoPlayerController6.isFullscreen())return!0;if(this.$FeedVideoPlayerController6.hasDialog()&&!this.$FeedVideoPlayerController6.isTahoe())return!1;var a=c("getViewportDimensions")().height,b=c("getViewportDimensions")().width,d=this.getDOMPosition();if(d.height===0)return!1;var e=d.y-i+(1-this.$FeedVideoPlayerController12)*d.height,f=d.y+this.$FeedVideoPlayerController12*d.height,g=d.x+(1-this.$FeedVideoPlayerController12)*d.width,h=d.x+this.$FeedVideoPlayerController12*d.width;if(e<0||f>=a||g<0||h>=b)return!1;e=this.$FeedVideoPlayerController18();return e!==null?this.$FeedVideoPlayerController19(d,c("getElementPosition")(e)):!0};e.$FeedVideoPlayerController18=function(){var a=d("DOMQuery").scry(this.$FeedVideoPlayerController2.video_container,"^div._1yj5");return a.length>0?a[0]:null};e.$FeedVideoPlayerController19=function(a,b){var c=a.x;a=a.x+a.width;var d=b.x;b=b.x+b.width;return d<c&&a<b};e.isAutoplayable=function(){return this.$FeedVideoPlayerController1.viewport_autoplay&&!this.$FeedVideoPlayerController9&&!this.$FeedVideoPlayerController3.size&&!this.$FeedVideoPlayerController13};e.getCurrentTimePosition=function(){return this.$FeedVideoPlayerController6.getCurrentTimePosition()};e.playWithoutUnmute=function(a){this.$FeedVideoPlayerController6.play(a)};e.getVideoID=function(){return this.$FeedVideoPlayerController6.getVideoID()};e.$FeedVideoPlayerController20=function(){this.$FeedVideoPlayerController16()};e.$FeedVideoPlayerController14=function(){var a=this;this.$FeedVideoPlayerController5=new(c("SubscriptionsHandler"))();var b=[["finishPlayback",function(){return a.$FeedVideoPlayerController21()}],["turnOffAutoplay",function(b){var c=null;b&&(c=b.reason);a.$FeedVideoPlayerController22(c)}],["unmuteVideo",function(){return a.$FeedVideoPlayerController23()}],["stateChange",function(){return a.$FeedVideoPlayerController24()}],["switchVideo",function(){return a.$FeedVideoPlayerController20()}],["fallbackPlay",function(){return a.$FeedVideoPlayerController25()}],["buffered",function(){return a.$FeedVideoPlayerController16()}],["buffering",function(){return a.$FeedVideoPlayerController16()}],["beginPlayback",function(b){b=b.reason;return a.$FeedVideoPlayerController26(b)}],["toggleFullscreen",function(){return a.$FeedVideoPlayerController27()}],["resumeAutoplay",function(b){var c=null;b&&(c=b.reason);a.$FeedVideoPlayerController28(c)}],["crossfadeWatchAndScroll",function(){return a.$FeedVideoPlayerController29()}],["enterWatchAndScroll",function(){return a.$FeedVideoPlayerController29()}],["exitWatchAndScroll",function(){return a.$FeedVideoPlayerController30()}],["muteVideo",function(){return a.$FeedVideoPlayerController31()}]],d=function(b){return a.emit.bind(a,b)};this.$FeedVideoPlayerController5.addSubscriptions.apply(this.$FeedVideoPlayerController5,b.map(function(b){var c=b[0];b=b[1];return a.$FeedVideoPlayerController6.addListener(c,b)}).concat(c("VideoPlayerApiEvents").map(function(b){return a.$FeedVideoPlayerController6.addListener(b,d(b))})))};e.$FeedVideoPlayerController31=function(){c("VideoPlayerExperiments").fixFeedVideosPlayOffscreen&&this.$FeedVideoPlayerController32("unmuted")};e.$FeedVideoPlayerController30=function(){c("VideoPlayerExperiments").fixFeedVideosPlayOffscreen&&(this.$FeedVideoPlayerController32("watch_and_scroll"),this.$FeedVideoPlayerController6&&this.$FeedVideoPlayerController6.isMuted()&&this.$FeedVideoPlayerController32("unmuted"))};e.$FeedVideoPlayerController29=function(){c("VideoPlayerExperiments").fixFeedVideosPlayOffscreen&&(this.$FeedVideoPlayerController33("watch_and_scroll"),this.$FeedVideoPlayerController32("manually_paused"))};e.$FeedVideoPlayerController27=function(){this.$FeedVideoPlayerController10&&this.$FeedVideoPlayerController6.unmute()};e.$FeedVideoPlayerController24=function(){if(this.$FeedVideoPlayerController17())return;this.$FeedVideoPlayerController6.isState("fallback")&&this.$FeedVideoPlayerController15();!this.$FeedVideoPlayerController6.isState("loading")&&this.$FeedVideoPlayerController8&&(clearTimeout(this.$FeedVideoPlayerController8),this.$FeedVideoPlayerController8=null);this.$FeedVideoPlayerController16()};e.$FeedVideoPlayerController26=function(a){c("VideoPlayerExperiments").fixFeedVideosPlayOffscreen&&this.$FeedVideoPlayerController32("manually_paused"),a==="user_initiated"&&this.$FeedVideoPlayerController10&&this.$FeedVideoPlayerController6.unmute()};e.preload=function(){this.$FeedVideoPlayerController6.preload&&this.$FeedVideoPlayerController6.preload()};e.logDisplayed=function(){this.$FeedVideoPlayerController6.logEvent("displayed",{autoplay_reason:this.$FeedVideoPlayerController1.autoplay_reason})};e.$FeedVideoPlayerController25=function(){var a={error:d("VideoPlayerLoggerErrors").ENTERED_FALLBACK,state:d("VideoPlayerLoggerErrorStates").PLAYBACK_FAILURE};this.$FeedVideoPlayerController6.logEvent("error",a)};e.$FeedVideoPlayerController23=function(){c("VideoPlayerExperiments").slidingWNSv3&&this.$FeedVideoPlayerController6.isAd()&&(this.$FeedVideoPlayerController12=.5),this.$FeedVideoPlayerController10=!1,this.$FeedVideoPlayerController7=!1};e.$FeedVideoPlayerController21=function(){var a=this.$FeedVideoPlayerController6.getOption("Looping","isLooping");a||this.$FeedVideoPlayerController33("has_seen_finished")};e.$FeedVideoPlayerController15=function(){this.$FeedVideoPlayerController11={isAutoplaying:this.$FeedVideoPlayerController7,preventAutoplay:this.$FeedVideoPlayerController9},this.$FeedVideoPlayerController33("fallback")};e.$FeedVideoPlayerController33=function(a){this.$FeedVideoPlayerController9=!0,a&&this.$FeedVideoPlayerController3.add(a),this.$FeedVideoPlayerController7=!1};e.$FeedVideoPlayerController28=function(a){this.$FeedVideoPlayerController32(a)};e.$FeedVideoPlayerController32=function(a){a?this.$FeedVideoPlayerController3["delete"](a):(this.$FeedVideoPlayerController3["delete"]("unmuted"),this.$FeedVideoPlayerController3["delete"]("has_seen_finished"),this.$FeedVideoPlayerController3["delete"]("manually_paused")),this.$FeedVideoPlayerController9=this.$FeedVideoPlayerController3.size>0,this.$FeedVideoPlayerController7=!this.$FeedVideoPlayerController9};e.$FeedVideoPlayerController22=function(a){if(c("VideoPlayerExperiments").enableAutoplayOnUnmutedVideos&&a==="unmuted")return;this.$FeedVideoPlayerController33(a);this.$FeedVideoPlayerController7=!1};e.$FeedVideoPlayerController16=function(){this.$FeedVideoPlayerController34()};e.getDOMPosition=function(){return this.$FeedVideoPlayerController6.getDOMPosition()};e.isLooping=function(){return!!this.$FeedVideoPlayerController6.getOption("Looping","isLooping")};e.pause=function(a){this.$FeedVideoPlayerController6.pause(a)};e.$FeedVideoPlayerController35=function(){this.$FeedVideoPlayerController14(),this.$FeedVideoPlayerController3["delete"]("fallback"),this.$FeedVideoPlayerController7=this.$FeedVideoPlayerController11.isAutoplaying,this.$FeedVideoPlayerController9=this.$FeedVideoPlayerController11.preventAutoplay};e.$FeedVideoPlayerController34=function(){var a=this;if(this.isState("fallback")){this.$FeedVideoPlayerController5.release();var b=this.$FeedVideoPlayerController2;b.fallback_link&&(c("DOM").remove(this.$FeedVideoPlayerController6.getVideoNode()),c("DOM").replace(b.video_container,b.fallback_link),c("DOM").appendContent(b.fallback_link,b.video_container));if(this.$FeedVideoPlayerController6.isFallbackRecoverable())this.$FeedVideoPlayerController35();else var d=this.$FeedVideoPlayerController6.addListener("VideoPlayerFallbackEvents/recover",function(){a.$FeedVideoPlayerController35(),d.remove()})}};e.isState=function(a){return this.$FeedVideoPlayerController6.isState(a)};e.getSource=function(){return this.$FeedVideoPlayerController6.getSource()};e.getIsInChannel=function(){return this.$FeedVideoPlayerController6.getIsInChannel()};e.getVideoPlayerController=function(){return this.$FeedVideoPlayerController6};e.abortLoading=function(){this.$FeedVideoPlayerController1.abort_loading_blocked||this.$FeedVideoPlayerController6.abortLoading()};e.isMuted=function(){return this.$FeedVideoPlayerController6.isMuted()};e.isPlaying=function(){return this.$FeedVideoPlayerController6.isState("playing")};e.shouldPauseWhenScrolledOffscreen=function(){return c("VideoPlayerExperiments").enableAutoplayOnUnmutedVideos?!0:!1};return b}(c("VideoAutoplayPlayerBase"));g["default"]=a}),98);
__d("VideoFeedRegister",["invariant","Bootloader","FeedVideoPlayerController","VideoAutoplayControllerX","VideoPlayerExperiments","VideoPlayerFeedRegisterConfig","gkx"],(function(a,b,c,d,e,f,g,h){function a(a,b){var d=b.controller;b.controller.getOption("VideoWithInstreamVideo","enabled")&&(b.controller=b.controller.getOption("VideoWithInstreamVideo","controller"));var e=new(c("FeedVideoPlayerController"))(a,b);b.controller.registerOption("WatchAndScroll","isEligible",function(){return b.wnsEnabled});b.controller.registerOption("GamingVideo","isGamingVideo",function(){return b.isGamingVideo});if(b.channelVersion){b.channelVersion==="channel_view"&&(b.channelModule||h(0,12396));a=b.channelModule;if((b.channelVersion!=="channel_view"||!a.getInteraction())&&c("VideoPlayerFeedRegisterConfig").watchAndScrollModule&&c("VideoPlayerFeedRegisterConfig").watchAndScrollModule.isActive()){c("VideoPlayerFeedRegisterConfig").watchAndScrollModule.registerChannelVideoController(b.controller);return}b.channelVersion==="channel_view"&&a.registerVideoController(b.controller)}else if(c("gkx")("678893")){a=e.getVideoPlayerController();a&&a.runOnApiReady(function(){c("VideoAutoplayControllerX").registerVideoUnit(e)})}else c("VideoAutoplayControllerX").registerVideoUnit(e);b.wnsEnabled&&c("VideoPlayerFeedRegisterConfig").watchAndScrollModule&&c("VideoPlayerFeedRegisterConfig").watchAndScrollModule.registerVideoController(b.controller,b.videoChannelCaller,c("VideoPlayerFeedRegisterConfig").watchAndScrollV3,c("VideoPlayerFeedRegisterConfig").wnsChannelsIntegrationEnabled);!c("VideoPlayerExperiments").disableDisableOffscreenPlayModule&&c("VideoPlayerFeedRegisterConfig").disableOffscreenPlayModule&&c("VideoPlayerFeedRegisterConfig").disableOffscreenPlayModule.registerVideoUnit(e);b.autoPlayWithChannelViewOrSnowlift&&d.runOnApiReady(function(){c("Bootloader").loadModules(["PhotoSnowlift"],function(a){return a.bootstrap(d.getVideoURL())},"VideoFeedRegister")})}g.registerVideoUnit=a}),98);
__d("VideoPlayerRegistry",["EventEmitter","Promise","regeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new Set(),i=new(c("EventEmitter"))(),j="added",k="removed";function l(a,b){return i.addListener(a,b)}function a(a,b){return i.once(a,b)}function m(a){return h.has(a)}function d(a){if(m(a))return!1;h.add(a);i.emit(j,a);return!0}function e(a){if(!m(a))return!1;h["delete"](a);i.emit(k,a);return!0}function f(){return h.size}function n(){return Array.from(h)}function o(a){var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:c=null;n().forEach(function(b){b.getByRootNode()===a&&(c=b)});if(c){d.next=6;break}d.next=5;return b("regeneratorRuntime").awrap(new(b("Promise"))(function(b,c){var d=l(j,function(c){c.getRootNode()===a&&(d.remove(),b(c))})}));case 5:c=d.sent;case 6:return d.abrupt("return",c);case 7:case"end":return d.stop()}},null,this)}g.ADDED=j;g.REMOVED=k;g.addListener=l;g.once=a;g.has=m;g.add=d;g.remove=e;g.count=f;g.getList=n;g.getByRootNode=o}),98);
__d("VideoWithClickToSnowlift",["Bootloader","logVideosClickTracking"],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a,b){this.$1=a,this.$2=b,this.$1.addListener("clickVideo",this.$3.bind(this)),this.$1.hasSeenClick()&&this.$3()}var c=a.prototype;c.$3=function(){var a=this;if(this.$1.isFullscreen()){if(this.$1.getOption("VideoWithLiveBroadcast","isLive"))return;this.$1.isState("playing")?this.$1.pause("user_initiated"):(b("logVideosClickTracking")(this.$1.getVideoNode()),this.$1.play("user_initiated"))}else b("Bootloader").loadModules(["PhotoSnowlift"],function(b){return b.bootstrap(a.$2)},"VideoWithClickToSnowlift")};return a}();e.exports=a}),null);
__d("VideoWithClickToTahoe",["cx","AsyncRequest","Bootloader","CSS","Event","URI","logVideosClickTracking"],(function(a,b,c,d,e,f,g,h){"use strict";var i=!1;a=function(){function a(a,b,d,e,f,g,h,i,j,k,l,m,n,o){this.$16=!1,this.$5=a,this.$6=new(c("URI"))(b),this.$4=d,this.$1=e,this.$2=f,this.$7=g,this.$8=h,this.$9=i,this.$10=l,this.$11=j,this.$12=k,this.$13=o,this.$14=m,this.$15=n,this.$5.addListener("stateChange",this.$17.bind(this)),this.$5.addListener("toggleFullscreen",this.$17.bind(this)),this.$5.setLogEntryPropertyGetters({channel_eligibility:"eligible"}),this.$5.addListener("enterTahoe",this.$18.bind(this,"control_click")),this.canOpenTahoe()&&this.$19(),this.$5.addListener("clickVideo",this.$20.bind(this)),this.$5.hasSeenClick()&&this.$20()}var b=a.prototype;b.$19=function(){if(this.$21())return;var a=this.$5.getVideoNode();d("CSS").addClass(a,"_62vr");d("CSS").addClass(a,"_1yhw");d("CSS").addClass(a,"_400z");d("CSS").addClass(a,"_1vek");var b=this.$5.isBroadcast();b&&d("CSS").addClass(a,"_3yn5")};b.$22=function(){if(this.$21())return;var a=this.$5.getVideoNode();d("CSS").removeClass(a,"_62vr");d("CSS").removeClass(a,"_1yhw");d("CSS").removeClass(a,"_400z");d("CSS").removeClass(a,"_1vek");d("CSS").removeClass(a,"_3yn5")};b.$17=function(){this.$21()||(this.canOpenTahoe()?this.$19():this.$22())};b.$21=function(){return this.$5.isState("destroyed")};b.$20=function(){if(this.$16)return;if(!this.canOpenTahoe())if(this.$5.isState("playing")){if(this.$5.getOption("VideoWithLiveBroadcast","isLive")||this.$5.getOption("VideoWithInstreamVideo","disableClickToPause"))return;this.$5.pause("user_initiated")}else c("logVideosClickTracking")(this.$5.getVideoNode()),this.$5.play("user_initiated");else this.$18("player_click")};b.$23=function(){i=!0,c("Bootloader").loadModules(["TahoeController","TahoeVideoView"],function(){},"VideoWithClickToTahoe"),this.$3&&this.$3.remove(),this.$3=null};b.canOpenTahoe=function(){var a=this.$5.getSource();if(a=="tahoe"||a=="channel")return!1;a=this.$5.getOption("VideoWithInstreamVideo","disableClickToPause");return this.$5.isFullscreen()||a||!this.$5.isState("playing")?!1:!0};b.invokeClickEvent=function(){this.$20()};b.disable=function(){this.$16=!0};b.enable=function(){this.$16=!1};b.$18=function(a){var b=this;if(this.$2)new(c("AsyncRequest"))(this.$6.toString()).send(),this.$5.pause();else{i=!0;this.$3&&this.$3.remove();this.$3=null;var d=c("URI").getNextURI(),e=babelHelpers["extends"]({},d.getQueryData(),{ref:"tahoe"});c("Bootloader").loadModules(["TahoeController"],function(c){c.openFromVideoPlayer(b.$5,b.$6.setQueryData(e),b.$4,b.$1,a,b.$7,b.$8,b.$9,b.$11,b.$12,b.$10,b.$14,b.$15,b.$13)},"VideoWithClickToTahoe")}};a.setUpBootloadOnHover=function(a){if(i||a.$3)return;a.$3=c("Event").listen(a.$5.getRootNode(),"mouseover",a.$23.bind(a))};return a}();g["default"]=a}),98);
__d("VideoWithFluentUFISupport",["UFIVideoPlayerRegistry"],(function(a,b,c,d,e,f,g){a=function(a){d("UFIVideoPlayerRegistry").registerVideoPlayerController(a)};g["default"]=a}),98);
__d("VideoWithSequentialAutoplay",["Arbiter","SubscriptionsHandler","VideoPlayerHTML5Experiments","destroyOnUnload"],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a,c){var d=this;this.$1=a;this.$2=c;this.$3=new(b("SubscriptionsHandler"))();if(b("VideoPlayerHTML5Experiments").displayLoopingWhenAutoplayNextVideo&&this.$2&&this.$2!=="0")if(this.$1.hasOption("Looping","disabled"))this.$1.setOption("Looping","disabled",!0);else{var e=this.$1.addListener("optionsChange",function(){d.$1.hasOption("Looping","disabled")&&(d.$1.setOption("Looping","disabled",!0),e.remove())});this.$3.addSubscriptions(e)}this.$1.addListener("finishPlayback",this.$4.bind(this));this.$3.addSubscriptions(b("Arbiter").subscribe("nextVideoAutoplay",function(a,b){b.nextVideoID==d.$1.getVideoID()&&d.$1.play("autoplay_initiated")}));b("destroyOnUnload")(function(){return d.$3.release()})}var c=a.prototype;c.$4=function(){b("Arbiter").inform("nextVideoAutoplay",{nextVideoID:this.$2})};return a}();e.exports=a}),null);
__d("VideoWithVODBroadcast",[],(function(a,b,c,d,e,f){a=function(a){a.registerOption("VideoWithVODBroadcast","isLiveVOD",function(){return!0})};f["default"]=a}),66);
__d("VideoPlayButton",["CSS","EventListener","VideoDisplayTimePlayButton"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b,e){this.$1=a;this.$2=b;e&&(this.$3=e.hiddenAfterFinish,this.$4=e.hiddenWhilePaused,this.$5=!!e.hiddenInFallback,this.$5=e.hiddenInFallback,this.$6=e.spherical);b=d("VideoDisplayTimePlayButton").getClicked(this.$2);d("VideoDisplayTimePlayButton").unregister(this.$2);a.addListener("beginPlayback",this.$7.bind(this));a.addListener("finishPlayback",this.$8.bind(this));a.addListener("pausePlayback",this.$9.bind(this));a.addListener("buffering",this.$10.bind(this));a.addListener("buffered",this.$11.bind(this));a.addListener("stateChange",this.$12.bind(this));a.addListener("playRequested",this.$13.bind(this));a.addListener("VideoChannelController/exitChannel",this.$14.bind(this));a.addListener("clickVideo",this.$15.bind(this));a.addListener("TahoeController/enterTahoe",this.$16.bind(this));c("EventListener").listen(this.$2,"click",this.$17.bind(this));e&&e.hiddenWhileJSLoading&&!e.hiddenWhileVideoLoading&&d("CSS").show(this.$2);b&&this.$17()}var b=a.prototype;b.$12=function(){this.$1.isState("fallback")&&(this.$5||this.$1.getIsInChannel()?d("CSS").hide(this.$2):d("CSS").show(this.$2))};b.$7=function(){d("CSS").hide(this.$2)};b.$9=function(){if(this.$4||this.$1.getSource()==="inline")return;d("CSS").show(this.$2)};b.$13=function(a){if(this.$1.isState("fallback")||a==="autoplay_initiated")return;d("CSS").hide(this.$2)};b.$14=function(){(this.$1.isState("paused")&&(!this.$4||this.$6)||this.$1.isState("finished")&&!this.$3)&&d("CSS").show(this.$2)};b.$16=function(){this.$1.isState("playing")||d("CSS").show(this.$2)};b.$8=function(){var a=this.$1.getOption("Looping","isLooping");this.$3||this.$1.getIsInChannel()||this.$1.getSource()==="tahoe"||a?d("CSS").hide(this.$2):d("CSS").show(this.$2)};b.$10=function(){d("CSS").hide(this.$2)};b.$11=function(){d("CSS").hide(this.$2)};b.$17=function(){this.$1.clickVideo()};b.$15=function(){if(this.$1.isState("fallback"))return;d("CSS").hide(this.$2)};return a}();g["default"]=a}),98);
__d("XVideoWithRapidFeedbackAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/instream_video/rapid_feedback/async/",{ad_type:{type:"Enum",required:!0,enumType:1},video_id:{type:"String",required:!0},ad_client_token:{type:"String"},elapsed_time_since_ad:{type:"Float"},ad_position_in_video:{type:"Float"},player_origin:{type:"Enum",enumType:1},player_sub_origin:{type:"String"},player_format:{type:"Enum",enumType:1},script_path:{type:"String"},is_indicator_shown:{type:"Bool",defaultValue:!1},is_ad_complete:{type:"Bool",defaultValue:!1}})}),null);
__d("VideoWithRapidFeedback",["AsyncRequest","DateConsts","ScriptPath","ViewportTrackingHelper","XVideoWithRapidFeedbackAsyncController","onViewportChanged"],(function(a,b,c,d,e,f,g){var h=10*d("DateConsts").MS_PER_SEC;a=function(){function a(a,b){this.$1=a,this.$2=b,this.$3=0,this.$4=0,this.$6=!1,this.$7=!1,a.isState("playing")&&this.$8(),a.addListener("beginPlayback",this.$8.bind(this)),a.addListener("pausePlayback",this.$9.bind(this)),a.addListener("commercialBreak/vodBreakStarting",this.$10.bind(this)),a.addListener("commercialBreak/showUFI",this.$11.bind(this)),this.$5=this.$12(),c("onViewportChanged")(this.$13.bind(this))}var b=a.prototype;b.$8=function(){this.$3===0&&(this.$3=Date.now())};b.$9=function(){this.$3>0&&(this.$4+=Date.now()-this.$3),this.$3=0};b.$10=function(){this.$6=!0};b.$11=function(){this.$6&&(this.$7=!0)};b.$13=function(){if(this.$1.isState("destroyed"))return;var a=this.$5;this.$5=this.$12();if(a&&!this.$5){a=this.$4;this.$3>0&&(a+=Date.now()-this.$3);a>h&&(this.$4=0,this.$3=0,this.$14())}};b.$12=function(){return d("ViewportTrackingHelper").isVisible(this.$1.getRootNode(),0)};b.$14=function(){var a=null,b=null,e=null,f=null,g=null,h=null,i=this.$1.getOption("VideoWithInstreamVideo","controller");if(i){i=i.getMostRecentAdInfo();i&&i.adClientToken&&(a=i.adClientToken,b=Date.now()-i.adStartPlayingTimeMs,e=i.adPositionInVideoMs,f=i.playerOrigin,g=i.playerSubOrigin,h=i.playerFormat)}i=c("XVideoWithRapidFeedbackAsyncController").getURIBuilder().setEnum("ad_type",this.$2).setString("video_id",this.$1.getVideoID()).setString("ad_client_token",a).setFloat("elapsed_time_since_ad",b).setFloat("ad_position_in_video",e).setEnum("player_format",h).setEnum("player_origin",f).setString("player_sub_origin",g).setString("script_path",d("ScriptPath").getScriptPath()).setBool("is_indicator_shown",this.$6).setBool("is_ad_complete",this.$7);new(c("AsyncRequest"))(i.getURI()).send()};return a}();g["default"]=a}),98);
__d("VideoPlayerRegistryComponent",["invariant","SubscriptionsHandler","VideoPlayerRegistry"],(function(a,b,c,d,e,f,g,h){a=function(){function a(a){this.$1=a||null,this.$2=new(c("SubscriptionsHandler"))(),this.$1&&this.$3()}var b=a.prototype;b.destroy=function(){this.$4(),this.$1=null};b.getController=function(){var a=this.$1;a||h(0,2032);return a};b.enable=function(a){this.$1&&this.$1!==a&&this.$4(),this.$1=a,this.$3()};b.disable=function(a){this.$4()};b.$3=function(){var a=this,b=this.getController();d("VideoPlayerRegistry").add(b);this.$2.addSubscriptions(b.addListener("stateChange",function(){b.isState("destroyed")&&a.destroy()}))};b.$4=function(){var a=this.getController();this.$2.release();this.$2.engage();d("VideoPlayerRegistry").remove(a)};return a}();g["default"]=a}),98);
__d("VideoSpinner",["cx","CSS","EventListener","ShakaConstants","react","setTimeout"],(function(a,b,c,d,e,f,g,h){d("react");a=function(){function a(a,b){this.$2=b,this.$1=a,this.$3=!1,a.addListener("beginPlayback",this.$5.bind(this)),a.addListener("finishPlayback",this.$6.bind(this)),a.addListener("pausePlayback",this.$7.bind(this)),a.addListener("playRequested",this.$8.bind(this)),a.addListener("buffering",this.$9.bind(this)),a.addListener("buffered",this.$10.bind(this)),a.addListener("networkInterrupted",this.$11.bind(this)),a.addListener("networkResumed",this.$12.bind(this)),a.addListener("stateChange",this.$13.bind(this)),a.addListener("clickVideo",this.$14.bind(this)),a.addListener("VideoSphericalOverlay/animationUpdate",this.$15.bind(this)),c("EventListener").listen(this.$2,"click",this.$16.bind(this))}var b=a.prototype;b.$15=function(a,b){a?d("CSS").addClass(this.$2,"_1st9"):d("CSS").removeClass(this.$2,"_1st9")};b.$11=function(){this.$4=!0};b.$12=function(){this.$4=!1};b.$9=function(){var a=this,b=c("ShakaConstants").numbers.buffering_spinner_delay_ms;this.$3=!0;b===0?d("CSS").show(this.$2):c("setTimeout")(function(){a.$3&&d("CSS").show(a.$2)},b)};b.$10=function(){d("CSS").hide(this.$2),this.$3=!1};b.$5=function(){this.$3?d("CSS").show(this.$2):d("CSS").hide(this.$2)};b.$7=function(){d("CSS").hide(this.$2)};b.$8=function(){d("CSS").hide(this.$2)};b.$6=function(){d("CSS").hide(this.$2)};b.$13=function(){this.$1.isState("fallback")&&d("CSS").hide(this.$2)};b.$14=function(){if(this.$1.isState("fallback"))return;(this.$3||this.$1.isState("ready")||this.$1.isState("loading"))&&d("CSS").show(this.$2)};b.$16=function(){this.$1.clickVideo()};return a}();g["default"]=a}),98);
__d("VODPresenceCVCDisplayStage",[],(function(a,b,c,d,e,f){a=Object.freeze({PRE_ENTER:"pre_enter",POST_ENTER:"post_enter"});f["default"]=a}),66);
__d("VideoVODCVCFetching",["RelayFBEnvironment","RelayModern","Run","SubscriptionsHandler","VODPresenceCVCDisplayStage","VideoVODCVCFetchingQuery.graphql","clearTimeout","keyMirror","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=c("keyMirror")(c("VODPresenceCVCDisplayStage")),i=1e4;a=function(){function a(a){var b=this;this.$1=null;this.$3=null;this.$4=null;this.$5=i;this.$6=!1;this.$10=function(){b.$6=!0,c("clearTimeout")(b.$4)};if(a.isAd()||a.isLiveVideo())return;this.$7=a;a.registerOption("VideoVODCVCFetching","cvcData",function(){return b.$1});this.$2=new(c("SubscriptionsHandler"))();this.$2.addSubscriptions(a.addListener("beginPlayback",function(){b.$3=null}),a.addListener("updateStatus",function(c){a.isState("playing")&&(b.$3===null&&(b.$3=c.position),b.$3+3<=c.position&&(b.$3=Infinity,b.$9(a)))}),a.addListener("pausePlayback",this.$10),a.addListener("finishPlayback",function(){return!a.getOption("Looping","isLooping")&&b.$10()}),a.addListener("becomeInvisible",this.$10));d("Run").onLeave(function(){return b.cleanOnLeave()})}var b=a.prototype;b.cleanOnLeave=function(){this.$2&&this.$2.release(),this.$10(),this.$7&&this.$7.hasOption("VideoVODCVCFetching","cvcData")&&this.$7.unregisterOption("VideoVODCVCFetching","cvcData")};b.$9=function(a){this.$6=!1,this.$11(a,h.POST_ENTER)};b.getQueryPromise=function(a,b,e,f){return d("RelayModern").fetchQuery(c("RelayFBEnvironment"),c("VideoVODCVCFetchingQuery.graphql"),{video_id:a.getVideoID(),stage:b,video_asset_id:e,prev_cvc:f})};b.$11=function(a,b){var d,e=this;d=this.getQueryPromise(a,b,this.$8,(d=this.$1)==null?void 0:d.viewerCount);c("promiseDone")(d,function(d){if(e.$6)return;d=d.vod_presence_cvc;if(d){var f=d.cvc||0,g=d.is_displayed,j=d.next_poll_ms||i;e.$8=d.video_asset_id;e.$1={viewerCount:f,showVODIndicator:g};a.emit("VideoVODCVC/viewCountChange",e.$1);j>=0&&b===h.POST_ENTER&&(e.$4=c("setTimeout")(e.$11.bind(e,a,b),j))}},function(d){if(e.$6)return;e.$4=c("setTimeout")(e.$11.bind(e,a,b),e.$5);e.$5=Math.min(Number.MAX_SAFE_INTEGER,2*e.$5)})};return a}();g["default"]=a}),98);
__d("VideoVODCVCSubscription",["EntityPresenceClient","Int64","Run","SubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";var h=42,i=7,j=5;a=function(){function a(a){var b=this;this.$7=function(){b.$5=null,b.$4&&(b.$4&&b.$4.leave(),b.$4=null)};if(a.isAd()||a.isLiveVideo())return;this.$1=new(c("SubscriptionsHandler"))();this.$4=null;this.$2=a;this.$3=this.$2.getPlayerOrigin();this.$5=null;this.$1.addSubscriptions(a.addListener("beginPlayback",function(){b.$5=null}),a.addListener("updateStatus",function(a){b.$2.isState("playing")&&(b.$5===null&&(b.$5=a.position),b.$5+3<=a.position&&(b.$5=Infinity,b.$6()))}),a.addListener("pausePlayback",this.$7),a.addListener("finishPlayback",function(){return!a.getOption("Looping","isLooping")&&b.$7()}),a.addListener("becomeInvisible",this.$7),a.addListener("seekEnd",this.$7),a.addListener("TahoeController/exitTahoe",this.$7));d("Run").onLeave(function(){return b.cleanOnLeave()})}var b=a.prototype;b.cleanOnLeave=function(){this.$7(),this.$1&&this.$1.release()};b.$6=function(){if(this.$4)return;this.$4=d("EntityPresenceClient").enter("vod",this.$2.getVideoID(),this.getLoggingCapabilitiesForEntityPresence().toString())};b.getLoggingCapabilitiesForEntityPresence=function(){var a;c("Int64").fromInt(0);a=c("Int64").fromString(Date.now().toString());var b=7;a=a.shiftLeft(b);a=a.add(c("Int64").fromInt(1));b=64-(h+i+j+b);a=a.shiftLeft(b);a=a.shiftLeft(j);a=a.add(c("Int64").fromInt(this.mapPlayerFormatToCapabilityBits(this.$2.getPlayerFormat())));a=a.shiftLeft(i);a=a.add(c("Int64").fromInt(this.mapPlayerOriginToCapabilityBits(this.$3)));return a};b.mapPlayerOriginToCapabilityBits=function(a){if(a===null)return 0;switch(a){case"commerce":return 12;case"direct_inbox":return 4;case"events":return 18;case"explorefeed":return 19;case"fb_stories":return 5;case"group":return 11;case"instant_articles":return 16;case"instant_shopping":return 16;case"live_chaining":return 22;case"living_room":return 9;case"living_room_recap":return 8;case"media_gallery":return 3;case"movie_checkout_flow":return 21;case"newsfeed":return 13;case"notifications":return 7;case"page_timeline":return 17;case"permalink":return 15;case"photosfeed":return 14;case"saved":return 23;case"search":return 20;case"top_live_bookmark":return 1;case"user_timeline":return 24;case"video_home":return 2;case"unknown":default:return 0}};b.mapPlayerFormatToCapabilityBits=function(a){if(a===null)return 0;switch(a){case"inline":return 1;case"snowlift":return 2;case"permalink":return 3;case"channel":return 4;case"full_screen":return 5;case"social_player":return 6;case"tv":return 7;case"misc":return 8;case"watch_scroll":return 9;case"watch_scroll_app_background":return 10;case"watch_and_go":return 11;case"watch_and_browse":return 12;case"canvas":return 13;case"tahoe":return 14;case"fb_stories":return 15;default:return 0}};return a}();g["default"]=a}),98);
__d("VideoVODCVCUI.react",["cx","ix","Image.react","intlSummarizeNumber","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return j.jsxs("div",{className:"_75tx",children:[j.jsx(c("Image.react"),{className:"_75ty",src:i("488783")}),c("intlSummarizeNumber")(this.props.viewerCount)]})};return b}(j.PureComponent);g["default"]=a}),98);
__d("VideoVODIndicator.react",["cx","fbt","BasicFBNux","JSResource","SubscriptionsHandler","TooltipData","VideoVODCVCUI.react","gkx","joinClasses","lazyLoadComponent","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k=c("lazyLoadComponent")(c("JSResource")("XUIAmbientNUX.react").__setRef("VideoVODIndicator.react")),l=6171,m=!1;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;e=a.call(this,b)||this;e.$2=null;e.state={showVODIndicator:!1,isDisplayingAdBreak:!1,viewerCount:null,showNUX:!1};e.$3=function(){d("BasicFBNux").onDismiss(l),e.setState({showNUX:!1})};b=e.props.vpc;if(e.props.renderLocation==="tahoeBackAffordance")if(c("gkx")("1210328")){if(b.isLiveVideo())return babelHelpers.assertThisInitialized(e);var f=b.getOption("UnifiedCVC","cvcData");f!=null&&(e.state.showVODIndicator=!f.h,e.state.viewerCount=f.c)}else{f=b.getOption("VideoVODCVCFetching","cvcData");f&&(e.state.showVODIndicator=f.showVODIndicator,e.state.viewerCount=f.viewerCount)}return e}var e=b.prototype;e.initSubscriptions=function(a){var b=this;this.$2=new(c("SubscriptionsHandler"))();this.$2.addSubscriptions(a.addListener("VideoVODCVC/viewCountChange",function(a){c("gkx")("1210328")||b.setState({showVODIndicator:a.showVODIndicator,viewerCount:a.viewerCount})}),a.addListener("finishPlayback",function(){return!a.getOption("Looping","isLooping")&&b.setState({showVODIndicator:!1})}),a.addListener("commercialBreak/vodBreakStarting",function(){b.setState({isDisplayingAdBreak:!0})}),a.addListener("commercialBreak/showUFI",function(){b.setState({isDisplayingAdBreak:!1})}),a.addListener("unifiedCVC/update",function(d){c("gkx")("1210328")&&!a.isLiveVideo()&&b.setState({showVODIndicator:!d.h,viewerCount:d.c})}))};e.releaseSubscriptions=function(){this.$2&&this.$2.release()};e.componentDidMount=function(){this.initSubscriptions(this.props.vpc)};e.componentWillUnmount=function(){this.releaseSubscriptions()};e.render=function(){var a=this;if(!this.state.showVODIndicator||!this.state.viewerCount||this.state.isDisplayingAdBreak)return null;var b=null,e=null;this.state.showNUX?(e=j.jsx(j.Suspense,{fallback:null,children:j.jsx(k,{contextRef:function(){return a.$1},position:"right",shown:!0,onCloseButtonClick:this.$3,children:i._(/*FBT_CALL*/"Xem hi\u1ec7n c\u00f3 bao nhi\u00eau ng\u01b0\u1eddi \u0111ang xem video n\u00e0y"/*FBT_CALL*/)})}),m||(m=!0,d("BasicFBNux").onView(l))):b=d("TooltipData").propsFor(i._(/*FBT_CALL*/"S\u1ed1 ng\u01b0\u1eddi hi\u1ec7n \u0111ang xem"/*FBT_CALL*/),"right");return j.jsxs("div",babelHelpers["extends"]({className:c("joinClasses")("_75ug"+(this.props.renderLocation==="tahoeBackAffordance"?" _7348":"")+(this.props.renderLocation==="videoHomeFeedUnit"?" _72u5":"")+(this.props.renderLocation==="videoNewsFeedUnit"?" _75uh":"")+" uiContextualLayerParent")},b,{children:[j.jsx(c("VideoVODCVCUI.react"),{ref:function(b){return a.$1=b},viewerCount:this.state.viewerCount}),e]}))};return b}(j.Component);g["default"]=a}),98);
__d("PlayerKeyboardControls.react",["cx","ix","CenteredContainer.react","Event","EventListener","FBCircularGlyph.react","Image.react","Keys","LiveRewindUtils","LiveVideoPlayerActions","ReactDOM","clamp","joinClasses","react"],(function(a,b,c,d,e,f,g,h,i){var j=d("react"),k=10,l=.1;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={action:null},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.componentDidMount=function(){this.$1=c("EventListener").listen(this.props.controller.getRootNode(),"keydown",this.$2.bind(this))};e.componentWillUnmount=function(){this.$1&&this.$1.remove()};e.$3=function(){if(!this.props.isLiveRewindEnabled)return;var a=this.props.controller,b=a.getCurrentTimePosition();this.setState({action:"pause"});a.pause("user_initiated");d("LiveVideoPlayerActions").setIsRewound(a,!0);d("LiveRewindUtils").logLiveRewindEvent("pause",a,null,b,null,b)};e.$4=function(){if(!this.props.isLiveRewindEnabled)return;var a=this.props.controller,b=a.getCurrentTimePosition();this.setState({action:"play"});a.play("user_initiated");d("LiveRewindUtils").logLiveRewindEvent("play",a,null,b,null,b)};e.$5=function(){return this.props.seekFrameWhenPaused&&!this.props.controller.isState("playing")?1/30:this.props.seekIncrement};e.$2=function(a){var b=this.props.controller,e=this.props.controller.getSource()==="tahoe";if(this.props.isFullscreenRequired&&!b.isFullscreen())return;var f=b.getCurrentTimePosition(),g=b.getVolume();switch(c("Event").getKeyCode(a)){case c("Keys").SPACE:e&&a.preventDefault();if(b.isState("playing")){if(this.props.isLiveStreaming){this.$3();break}this.setState({action:"pause"});b.pause("user_initiated")}else{if(this.props.isLiveStreaming){this.$4();break}this.setState({action:"play"});b.play("user_initiated")}break;case c("Keys").LEFT:if(this.props.isLiveStreaming){this.props.isLiveRewindEnabled&&(d("LiveRewindUtils").seekBack(b),this.setState({action:"rewind"}));break}this.setState({action:"rewind"});b.seek(f-this.$5());break;case c("Keys").RIGHT:if(this.props.isLiveStreaming){this.props.isLiveRewindEnabled&&(d("LiveRewindUtils").seekForward(b),this.setState({action:"forward"}));break}this.setState({action:"forward"});b.seek(f+this.$5());break;case c("Keys").UP:if(!b.isBroadcaster()&&b.isAudioBlocked())break;e&&a.preventDefault();f=Math.min(g+l,1);this.setState({action:"volume-up"});b.setVolume(f);b.isMuted()&&b.unmute();break;case c("Keys").DOWN:if(!b.isBroadcaster()&&b.isAudioBlocked())break;e&&a.preventDefault();f=Math.max(g-l,0);f<.001?(this.setState({action:"mute"}),b.mute()):(this.setState({action:"volume-down"}),b.setVolume(f));break;case c("Keys").M:if(!b.isBroadcaster()&&b.isAudioBlocked())break;b.isMuted()?(this.setState({action:"unmute"}),b.unmute()):(this.setState({action:"mute"}),b.mute());break;case c("Keys").F:b.isFullscreen()?this.setState({action:"exit-fs"}):this.setState({action:"enter-fs"});setTimeout(function(){return b.toggleFullscreen()},100);break;case c("Keys").COMMA:this.props.enablePlaybackRateControl&&b.setPlaybackRate(c("clamp")(b.getPlaybackRate()/2,.5,1));break;case c("Keys").PERIOD:this.props.enablePlaybackRateControl&&b.setPlaybackRate(c("clamp")(b.getPlaybackRate()*2,1,2));break}};e.render=function(){if(!this.state.action)return null;var a=this.props.controller,b="",e="",f=null;switch(this.state.action){case"play":b=i("476305");break;case"pause":b=i("476304");break;case"rewind":b=i("476307");e="_380-";a.isState("playing")?f=this.props.seekIncrement!==k?null:j.jsx(c("Image.react"),{className:"_pa6",src:i("476306")}):f=this.props.seekFrameWhenPaused?null:j.jsx(c("Image.react"),{className:"_pa6",src:i("476306")});break;case"forward":b=i("476308");e="_3813";a.isState("playing")?f=this.props.seekIncrement!==k?null:j.jsx(c("Image.react"),{className:"_pa6",src:i("476306")}):f=this.props.seekFrameWhenPaused?null:j.jsx(c("Image.react"),{className:"_pa6",src:i("476306")});break;case"volume-up":case"unmute":b=i("476301");break;case"volume-down":b=i("476302");break;case"mute":b=i("476303");break;case"enter-fs":b=i("476310");break;case"exit-fs":b=i("476309");break}a=j.jsx(c("FBCircularGlyph.react"),{circleSize:120,className:c("joinClasses")(e,"_3814"),glyph:b,ref:function(a){a=d("ReactDOM").findDOMNode(a);if(!a||!e)return;a.classList.remove(e);void a.offsetWidth;a.classList.add(e)}});return j.jsx(c("CenteredContainer.react"),{className:"_3815 _381b",fullHeight:!0,horizontal:!0,ref:function(a){a=d("ReactDOM").findDOMNode(a);if(!a)return;a.classList.remove("_381b");void a.offsetWidth;a.classList.add("_381b")},vertical:!0,children:j.jsxs("div",{children:[a,f]})})};return b}(j.Component);a.defaultProps={enablePlaybackRateControl:!1,isFullscreenRequired:!1,seekIncrement:k,seekFrameWhenPaused:!1};g["default"]=a}),98);
__d("VideoNodeStaledScreen",["CSS","EventListener","SubscriptionsHandler"],(function(a,b,c,d,e,f,g){a=function(){function a(a){var b=this;this.$3=new(c("SubscriptionsHandler"))();this.$5=function(){d("CSS").show(b.$1)};this.$4=function(){d("CSS").hide(b.$1)};this.$1=a;this.$2=null;c("EventListener").listen(this.$1,"click",this.$4)}var b=a.prototype;b.enable=function(a){this.$2=a,this.$3.addSubscriptions(this.$2.addListener("videoNodeStaled",this.$5))};b.disable=function(){this.$3.release(),this.$2=null};return a}();g["default"]=a}),98);
__d("VideoStateDirectory",["EventEmitter","VideoPlayerExperiments"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this)||this;b.$VideoStateDirectory1=new Map();return b}var d=b.prototype;d.setPlaybackState=function(a,b,d){var e=this.$VideoStateDirectory1.get(a)||{};e.currentTimePosition=b;e.playbackDuration=d;e.watched=e.currentTimePosition/e.playbackDuration>=c("VideoPlayerExperiments").watchedPercentage/100||!!e.watched;this.$VideoStateDirectory1.set(a,e);this.emit(a,e)};d.setSaveState=function(a,b){var c=this.$VideoStateDirectory1.get(a)||{};c.saved=b;this.emit(a,c)};d.setSubscriptionState=function(a,b){var c=this.$VideoStateDirectory1.get(a)||{};c.subscribed=b;this.emit(a,c)};d.getState=function(a){return this.$VideoStateDirectory1.get(a)};return b}(c("EventEmitter"));b=new a();g["default"]=b}),98);
__d("VideoUpdateStateDirectory",["VideoStateDirectory"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){var a=this;this.$2=function(){var b=a.$1,d=b.getVideoID(),e=b.getCurrentTimePosition();b=b.getPlaybackDuration();c("VideoStateDirectory").setPlaybackState(d,e,b)}}var b=a.prototype;b.enable=function(a){this.$1=a,a.addListener("finishPlayback",this.$2),a.addListener("pausePlayback",this.$2)};b.disable=function(){};return a}();g["default"]=a}),98);
__d("EmbeddedVideoPauseOverlay",["cx","fbt","Arbiter","CSS","DOM","DOMDimensions","EventListener","throttle"],(function(a,b,c,d,e,f,g,h){var i="_3bw";a=function(){"use strict";function a(a,c,d,e,f,g,i,j,k){var l=this;this.$1=c;this.$2=a;this.$3=d;this.$4=e;this.$5=f;this.$6=g;this.$7=i;this.$8=j;this.$9=0;k?(this.$10=k.showOnlyOnFullscreen,this.$11=k.showOnEndscreen):(this.$10=!1,this.$11=!0);this.$12=h._(/*FBT_CALL*/"Th\u00edch"/*FBT_CALL*/);this.$13=h._(/*FBT_CALL*/"B\u1ecf th\u00edch"/*FBT_CALL*/);this.$14=h._(/*FBT_CALL*/"Chia s\u1ebb"/*FBT_CALL*/);this.$15();this.$2.addListener("beginPlayback",this.$16.bind(this));this.$2.addListener("pausePlayback",this.$17.bind(this));this.$2.addListener("finishPlayback",this.$17.bind(this));this.$2.addListener("toggleFullscreen",this.$18.bind(this));b("EventListener").listen(this.$2.getRootNode(),"mousemove",b("throttle")(this.$19.bind(this),200));b("EventListener").listen(this.$2.getRootNode(),"mouseenter",function(){l.$20=!0});b("EventListener").listen(this.$2.getRootNode(),"mouseleave",function(){l.$2.isState("playing")&&(l.$20=!1,l.$21())});b("Arbiter").subscribe("embeddedUfiToggle",function(){l.$22(),l.$23()});b("EventListener").listen(window,"resize",b("throttle")(function(){l.$23()},100))}var c=a.prototype;c.$16=function(){this.$22(),this.$23(),this.$19()};c.$22=function(){var a;this.$2.isFullscreen()?a=64:a=32;this.$15();this.$9=b("DOMDimensions").getElementDimensions(this.$3).width+b("DOMDimensions").getElementDimensions(this.$4).width+a};c.$23=function(){if(this.$2.isState("destroyed"))return;var a=b("DOMDimensions").getElementDimensions(this.$2.getRootNode()).width;a=a<this.$9;a?this.$24():this.$15()};c.$15=function(){this.$6&&b("DOM").setContent(this.$6,this.$14),this.$7&&b("DOM").setContent(this.$7,this.$12),this.$8&&b("DOM").setContent(this.$8,this.$13),this.$5&&this.$5.showText()};c.$24=function(){this.$6&&b("DOM").setContent(this.$6,null),this.$7&&b("DOM").setContent(this.$7,null),this.$8&&b("DOM").setContent(this.$8,null),this.$5&&this.$5.hideText()};c.$25=function(){return this.$10&&!this.$2.isFullscreen()?!1:this.$2.isState("playing")&&this.$20||this.$2.isState("paused")||this.$26&&this.$2.isState("finished")};c.$19=function(){var a=this;this.$25()&&(this.$27(),clearTimeout(this.$28),this.$28=setTimeout(function(){a.$2.isState("playing")&&a.$21()},3e3))};c.$18=function(){this.$25()?this.$27():this.$21()};c.$17=function(){this.$25()?this.$27():this.$21()};c.$27=function(){b("CSS").removeClass(this.$1,i)};c.$21=function(){b("CSS").addClass(this.$1,i)};return a}();e.exports=a}),null);